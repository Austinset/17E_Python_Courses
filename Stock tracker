import json
import random
import requests


apikey = input("Data is drawn from 'https://www.alphavantage.co'. Use their API.\nWhat is your API? (WARNING: 25 a day limit per api, data is added every 5 minutes): ")
symbol = input("What is the stock you wish to view? ")

url = 'https://www.alphavantage.co/query'
params = {
    'function': 'TIME_SERIES_INTRADAY',
    'symbol': symbol,
    'outputsize': 'compact',
    'interval': '5min',
    'apikey': apikey
}

try:
    response = requests.get(url, params=params)
    response.raise_for_status()

    data = response.json()

    if 'Error Message' in data:
        print(f"Error from Alpha Vantage API: {data['Error Message']}")
    else:
        time_series_key = f'Time Series (5min)'
        latest_timestamp = next(iter(data[time_series_key]))
        latest_data = data[time_series_key][latest_timestamp]
        latest_price = latest_data['4. close']

        print(f"The latest price of {symbol} is: {latest_price}")

except requests.exceptions.RequestException as e:
    print('Error fetching data:', e)

# purchase history for user
# user cost
#user sell
#user buy
